"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var DOMTraverse={articleWrapper:document.querySelector(".article-wrapper"),articleSection:document.getElementsByClassName("article-section")[0],mainMenu:document.getElementById("main-menu"),mainMenuToggle:document.getElementById("toggle-main-menu"),mainTag:document.querySelector("main"),sectionTitles:document.getElementsByClassName("section-title"),allStoriesButton:document.getElementById("show-all-stories"),downloadInformationModal:document.getElementById("download-modal-small-screen"),downloadLoader:document.getElementById("download-loader"),filterForm:document.getElementById("filter-form"),searchform:document.getElementById("search-form"),searchInput:document.getElementById("search-for-title"),downloadWrapper:document.getElementsByClassName("download-wrapper")[0],downloadModal:document.getElementsByClassName("download-modal")[0],downloadStoryButton:document.getElementById("download-story-button"),downloadAllButton:document.getElementById("download-all-button"),storyLoader:document.getElementsByClassName("story-loader"),topSpanDownloads:document.getElementsByClassName("top-span downloads")[0],topSpanReadingList:document.getElementsByClassName("top-span reading-list")[0],topSpans:[].concat(_toConsumableArray(document.getElementsByClassName("top-span"))),loginForm:document.getElementById("login-form"),resetForm:document.getElementById("reset-form"),signUpForm:document.getElementById("sign-up-form"),signUpBirthday:document.getElementById("sign-up-birthday"),tovalidate:[].concat(_toConsumableArray(document.getElementsByClassName("validateJS")))},Utility={currentPath:window.location.pathname,getCurrentPath:function(){return"/index.html"==this.currentPath||"/"==this.currentPath||"/projects/dfds_seaways/"==this.currentPath||"/projects/dfds_seaways/index.html"==this.currentPath?"index":"/projects/dfds_seaways/html/search-results.html"==this.currentPath||"/html/search-results.html"==this.currentPath?"searchResults":"/html/download-list.html"==this.currentPath||"/projects/dfds_seaways/html/download-list.html"==this.currentPath?"downloads":"/html/signup.html"==this.currentPath||"/projects/dfds_seaways/html/signup.html"==this.currentPath?"signUp":"/html/stories/kater.html"==this.currentPath||"/projects/dfds_seaways/html/stories/kater.html"==this.currentPath?"kater":"/html/stories/paranoia.html"==this.currentPath||"/projects/dfds_seaways/html/stories/paranoia.html"==this.currentPath?"paranoia":"/html/stories/vrijdag-de-dertiende.html"==this.currentPath||"/projects/dfds_seaways/html/stories/vrijdag-de-dertiende.html"==this.currentPath?"vrijdag":void 0},getCurrentScreenHeight:window.innerHeight,getCurrentScreenWidth:window.innerWidth,getImagePath:function(e){return this.currentPath.includes("dfds_seaways")?"/"==this.currentPath||this.currentPath.includes("/index.html")?"/projects/dfds_seaways/dist/img/icons/"+e+".svg":this.currentPath.includes("stories")?"../../dist/img/icons/"+e+".svg":"../dist/img/icons/"+e+".svg":"/"==this.currentPath||"/index.html"==this.currentPath?"./dist/img/icons/"+e+".svg":this.currentPath.includes("stories")?"../../dist/img/icons/"+e+".svg":"../dist/img/icons/"+e+".svg"},MajorBreakPointTwo:1039,route:function(e,t){localStorage.setItem(e,t),"/"==this.currentPath||"/index.html"==this.currentPath?window.location.href="/html/search-results.html":window.location.href="/projects/dfds_seaways/html/search-results.html"},storyStorage:"https://api.myjson.com/bins/qvlgr",xhr:new XMLHttpRequest},LoadStories={createRequest:function(e){function t(e){var t=document.createElement("span");t.innerText="Oeps, er ging iets fout. Probeer de pagina opnieuw te laden om de fout op te lossen!",DOMTraverse.articleWrapper.appendChild(t)}var n=Utility.xhr;n.open("GET",Utility.storyStorage,!0);var i=void 0;n.onprogress=function(){void 0==i&&(LoadStories.createLoader(DOMTraverse.articleWrapper),i=!0)},n.onload=function(){if(200==this.status){var t=JSON.parse(this.responseText);LoadStories.createArticles(t,e)}},n.onerror=function(e){t()},n.send()},createLoader:function(e){for(var t=document.createElement("ul"),n=0;n<12;n++){var i=document.createElement("li");t.appendChild(i)}t.classList.add("story-loader"),e.appendChild(t)},createArticles:function(e,t){function n(){var n=[];if(void 0===localStorage.getItem("filters")||null===localStorage.getItem("filters"))"input"==t?(o=localStorage.getItem(t),e.stories.forEach(function(e){"allStories"===o?n.push(e.title):(e.title.toLowerCase().includes(o.toLowerCase())||-1!=e.text.indexOf(o.toLowerCase()))&&n.push(e.title)})):"readingList"==t&&(o=[].concat(_toConsumableArray(localStorage.getItem(t).split(",")))).forEach(function(e){n.push(e)});else{o=JSON.parse(localStorage.getItem("filters"));for(var i in o)o.hasOwnProperty(i)&&n.push({filter:o[i]})}return n}function i(t){if(0==r)t.forEach(function(t,n){e.stories.forEach(function(e){return LoadStories.matchStorageToRequest(t,e,n)})}),r++;else if(1==r){var n=25;t.forEach(function(t){n++,e.stories.forEach(function(e){return LoadStories.matchStorageToRequest(t,e,n)})}),r++}else if(2==r){var i=50;t.forEach(function(t){i++,e.stories.forEach(function(e){return LoadStories.matchStorageToRequest(t,e,i)})}),r++}else if(3==r){var a=75;t.forEach(function(t){a++,e.stories.forEach(function(e){return LoadStories.matchStorageToRequest(t,e,a)})})}}function a(){Utility.getCurrentScreenWidth<Utility.MajorBreakPointTwo?(DOMTraverse.articleSection.querySelector(".right-chevron").classList.add("js-active"),console.log(!0)):DOMTraverse.articleSection.removeChild(DOMTraverse.articleSection.querySelector(".right-chevron"))}var o=void 0,r=0;!function(){function r(){[].concat(_toConsumableArray(DOMTraverse.sectionTitles)).forEach(function(e){"Resultaten"!=e.innerHTML&&"Leeslijst"!=e.innerHTML||(e.innerHTML+=" - "+s.length)})}var s=void 0;if(0==(s=void 0===localStorage.getItem("filters")||null===localStorage.getItem("filters")?n():function(){var t=[],i=[];return n().forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&e[n].forEach(function(e){t.push(e)})}),e.stories.forEach(function(e){t.forEach(function(t){e.readTime!==t&&e.storyLength!==t&&e.ageSuggested!==t||i.push(e.title)})}),i}()).length||void 0==s){LoadStories.hideSortButton();var l=document.createElement("span");l.innerHTML="Helaas, er zijn geen matches gevonden met de opgegeven input: "+o+".<br>Probeer een ander zoekwoord, of gebruik de filters om te zoeken.",DOMTraverse.articleWrapper.style.backgroundColor="white",DOMTraverse.articleWrapper.appendChild(l),r()}else if(s.length>25){var d=0;0==d&&i(s.slice(0,25)),"readingList"==t&&DOMTraverse.articleWrapper.classList.add("reading-list-js-results"),function(){if(Utility.getCurrentScreenWidth>Utility.MajorBreakPointTwo){var e=DOMTraverse.articleWrapper.clientHeight;window.addEventListener("scroll",function(){if(window.pageYOffset>e-1500)if(0==d){var t=s.slice(25,50);e+=e,d++,i(t)}else if(1==d){var n=s.slice(50,75);e+=6e3,d++,i(n)}else if(2==d){var a=s.slice(75,100);e+=e,d++,i(a)}})}else{var t=DOMTraverse.articleWrapper.scrollWidth;DOMTraverse.articleWrapper.addEventListener("scroll",function(){if(DOMTraverse.articleWrapper.scrollLeft>t-1500)if(0==d){var e=s.slice(25,50);t+=t,d++,i(e)}else if(1==d){var n=s.slice(50,75);t+=6e3,d++,i(n)}else if(2==d){var a=s.slice(75,100);t+=t,d++,i(a)}})}}(),r(),a()}else"readingList"==t&&DOMTraverse.articleWrapper.parentElement.classList.add("reading-list-js-results"),i(s),r(),a()}(),DOMTraverse.articleWrapper.removeChild(DOMTraverse.storyLoader[0]),this.loadingFininished=!0},hideSortButton:function(){document.getElementById("toggle-button-group-sort").style.display="none"},loadingFininished:!1,matchStorageToRequest:function(e,t,n){if(e==t.title.toLowerCase()||e==t.title){var i=void 0;if(null==t.image&&void 0==t.image)return;i=Utility.currentPath.includes("dfds_seaways")?Utility.currentPath.includes("search-results")?"../dist/img/storyImages/"+t.image:"dist/img/storyImages/"+t.image:"/dist/img/storyImages/"+t.image;var a=t.title.toLowerCase(),o=t.nr,r=t.by,s={readTime:t.readTime,storyLength:t.storyLength,ageSuggested:t.ageSuggested},l=t.text.substr(0,150),d=l=t.text.substr(0,Math.min(l.length,l.lastIndexOf(" "))),c=t.text.substring(Math.max(l.length,l.lastIndexOf(" ")));DOMTraverse.articleWrapper.innerHTML+=CreateArticle.Article(i,r,a,o,d,c,n,s)}}},SortStories={getElements:function(){var e=document.getElementById("button-group-sort");return{sortForm:e,inputs:e.querySelectorAll("input"),labels:e.querySelectorAll("label")}},determineActiveSorter:function(){var e=this.getElements(),t=(e.sortForm,e.inputs),n=(e.labels,[]),i=void 0,a=void 0;t.forEach(function(e){function t(e){n.push(e)}e.checked&&t(e),e.addEventListener("click",function(){!0===this.checked?(t(this),(i=n.shift()).checked=!1):i=this,i.addEventListener("change",function(){setTimeout(function(){!1===this.checked&&(this.checked=!0)},500)}),a=n[0],SortStories.sortPerActive(a)})}),a=n[0],SortStories.sortPerActive(a)},getStoriesArray:function(){return document.querySelectorAll(".article-wrapper article")},sortPerActive:function(e){function t(e){for(var t=e.length,n=void 0,i=void 0;0!==t;)i=Math.floor(Math.random()*t),n=e[t-=1],e[t]=e[i],e[i]=n;return e}var n=[].concat(_toConsumableArray(this.getStoriesArray()));if(e.name.includes("numeric")){var i=function(e){var t=e.firstElementChild.firstElementChild.dataset.target;return t.slice(t.lastIndexOf("-1"))},a=n.sort(function(e,t){return i(e)==i(t)?0:i(e)>i(t)?1:-1});this.updateHTML(a)}else if(e.name.includes("alphabetically")){var o=n.sort(function(e,t){return e.id==t.id?0:e.id>t.id?1:-1});this.updateHTML(o)}else if(e.name.includes("popularity")){var r=t(n);this.updateHTML(r)}else if(e.name.includes("relevance")){var s=t(n);this.updateHTML(s)}},updateHTML:function(e){DOMTraverse.articleWrapper.innerHTML="",e.forEach(function(e){DOMTraverse.articleWrapper.appendChild(e)})}},CreateArticle={Article:function(e,t,n,i,a,o,r,s){return'\n        <article id="'+n+'" data-filter-readTime='+s.readTime+" data-filter-storyLength="+s.storyLength+" data-filter-ageSuggested="+s.ageSuggested+">\n            "+this.ArticleHeader(e,t,n,i,r)+"\n            "+this.Paragraph(r,a,o)+"\n            "+this.Footer(n,this.UploadSection(r,t),this.ErrorModalDownloads(r),this.ErrorModalUploads(r),this.errorModalLogin(r),r)+"\n         </article>\n        "},ArticleHeader:function(e,t,n,i,a){return'\n            <header class="article-header">\n                <img src='+e+' alt="search-result-image" onclick="Microinteractions.toggleJavascript.call(this)" class="toggleFullStory" data-target="rest-text-'+a+'" data-open="upload-photo-section-'+a+'">\n                <span>Door: '+t+'</span>\n                <div onclick="Microinteractions.toggleJavascript.call(this)" class="toggleFullStory" data-target="rest-text-'+a+'" data-open="upload-photo-section-'+a+'"><h3>'+n+" ("+i+")</h3></div>\n            </header>\n        "},Paragraph:function(e,t,n){return'\n            <p onclick="Microinteractions.toggleJavascript.call(this)" aria-label="Open volledig verhaal" id="article-text-'+e+'" data-target="rest-text-'+e+'" data-open="upload-photo-section-'+e+'">\n                '+t+'\n                <span id="rest-text-'+e+'">'+n+"</span>\n            </p>\n        "},Footer:function(e,t,n,i,a,o){return"/"==Utility.currentPath?"\n                <footer>\n                    "+t+'\n                    <button type="button" class="btn btn-main" onClick="IndexPage.removeFromList.call(this)" id=read-later-'+e+'>Verwijderen uit leeslijst</button>\n                    <button type="button" class="btn btn-main" id="toggle-download-modal-'+o+'">Toevoegen aan downloadlijst</button>\n                    '+n+"\n                    "+i+"\n                    "+a+"\n                </footer>\n            ":"\n                <footer>\n                    "+t+'\n                    <button type="button" class="btn btn-main" onClick="ResultPage.addActiveClass.call(this)" id=read-later-'+e+'>Toevoegen aan leeslijst</button>\n                    <button type="button" class="btn btn-main" id="toggle-download-modal-'+o+'" onClick="Downloading.handlePopup.call(this)">Toevoegen aan downloadlijst</button>\n                    '+n+"\n                    "+i+"\n                    "+a+"\n                </footer>\n            "},UploadSection:function(e,t){return'\n            <section class="upload-photo-section" id="upload-photo-section-'+e+'">\n                <p>\n                    De foto geuploaded bij dit verhaal was van:\n                    '+t+". Hij heeft al <span>"+(Math.floor(400*Math.random())+10)+' volgers</span>\n                    verkregen door regelmatig foto’s te plaatsen\n                    bij verhalen die hij passend vindt bij zijn reis-\n                    foto’s. Denk je dat je het beter kunt?\n                </p>\n                <form id="upload-image-form-'+e+'">\n                    <fieldset>\n                        <div>\n                            <label for="select-image-'+e+'">Upload je foto</label>\n                            <input type="file" accept=".jpg, .png" id="select-image-'+e+'">\n                            <button type="button" class="btn btn-main" onclick="UploadPhoto.submitActions.call(this)">Upload</button>\n                        </div>\n                    </fieldset>\n                </form>\n                <p>\n                    dan hier je foto en wie weet ontdekken\n                    toekomstige reizigers nog mooie locaties\n                    door jouw foto’s! Je weet nooit wat voor\n                    bedankje ze je hiervoor kunnen geven.\n                </p>\n            </section>\n        '},ErrorModalUploads:function(e){return'\n            <section id="uploads-modal-'+e+'" class="uploads-modal">\n                <header>\n                    <h4>Uploadfout - Formaat</h4>\n                    <img src='+(Utility.currentPath.includes("dfds_seaways")?"/projects/dfds_seaways/dist/img/icons/multiply_white.svg":"/dist/img/icons/multiply_white.svg")+' class="remove-uploads-modal">\n                </header>\n                <p>\n                    Zo te zien is er iets fout gegaan bij het\n                    uploaden van de door u zo zeer\n                    gewaardeerde foto. Zorg ervoor dat de\n                    afbeelding niet groter is dan 20mb en het\n                    een .jp(e)g of .png formaat heeft.\n                </p>\n            </section>\n        '},errorModalLogin:function(e){return'\n            <section id="login-modal-'+e+'" class="login-modal">\n                <header>\n                    <h4>Inloggen Vereist!</h4>\n                    <img src='+(Utility.currentPath.includes("dfds_seaways")?"/projects/dfds_seaways/dist/img/icons/multiply_white.svg":"/dist/img/icons/multiply_white.svg")+' class="remove-login-modal">\n                </header>\n                <p>\n                    Om verhalen toe te voegen aan de\n                    leeslijst dient u ingelogd te zijn. U\n                    kunt snel naar de inlogpagina navigeren\n                    door op dit venster te klikken of door\n                    in het menu rechtsboven op “Inloggen /\n                    aanmelden” te drukken.\n                </p>\n            </section>\n        '},ErrorModalDownloads:function(e){return'\n            <section id="download-modal-'+e+'" class="download-modal">\n                <header>\n                    <h4>Inloggen Vereist!</h4>\n                    <img src='+(Utility.currentPath.includes("dfds_seaways")?"/projects/dfds_seaways/dist/img/icons/multiply_white.svg":"/dist/img/icons/multiply_white.svg")+' id="remove-modal-'+e+'"/>\n                </header>\n                <p>\n                    Om verhalen toe te voegen aan de\n                    downloadlijst dient u ingelogd te zijn. U\n                    kunt snel naar de inlogpagina navigeren\n                    door op dit venster te klikken of door\n                    in het menu rechtsboven op “Inloggen /\n                    aanmelden” te drukken.\n                </p>\n            </section>\n        '}},Microinteractions={toggleJavascript:function(){document.getElementById(""+this.dataset.target).classList.toggle("js-active"),void 0!==this.dataset.open&&null!==this.dataset.open&&document.getElementById(""+this.dataset.open).classList.toggle("js-active"),Microinteractions.determineElClicked.call(this)},determineElClicked:function(){var e=this.dataset.target;if(e.includes("main-menu"))"Account icon"==this.firstElementChild.alt?(DOMTraverse.mainMenu.classList.add("js-active"),DOMTraverse.mainTag.classList.add("js-active"),this.firstElementChild.alt="Sluit icon",this.firstElementChild.src=Utility.getImagePath("multiply"),this.setAttribute("aria-label","Sluit hoofdmenu")):(DOMTraverse.mainTag.classList.remove("js-active"),this.firstElementChild.alt="Account icon",this.firstElementChild.src=Utility.getImagePath("account"),this.setAttribute("aria-label","Open hoofdmenu"));else if(e.includes("result-page-search-form"));else if(e.includes("rest-text")&&this.classList.contains("toggleFullStory")){var t=function(){var e=this.getAttribute("data-target"),t=e.slice(e.lastIndexOf("-")+1);return document.getElementById("article-text-"+t)}.call(this);t.classList.contains("js-active")?(t.setAttribute("aria-label","Open volledig verhaal"),t.classList.remove("js-active")):(t.setAttribute("aria-label","Sluit volledig verhaal"),t.classList.add("js-active"))}else e.includes("rest-text")?this.classList.contains("js-active")?(this.setAttribute("aria-label","Open volledig verhaal"),this.classList.remove("js-active")):(this.setAttribute("aria-label","Sluit volledig verhaal"),this.classList.add("js-active")):e.includes("button-group-sort")?this.parentElement.classList.toggle("js-active"):this.classList.toggle("js-active")},loopOverDataTargets:void[].concat(_toConsumableArray(document.querySelectorAll("[data-target]"))).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),Microinteractions.toggleJavascript.call(this)})})},UploadPhoto={submitActions:function(){var e=this.previousElementSibling.value,t=this.parentElement.parentElement.parentElement.parentElement,n=t.querySelectorAll("p");if(null!==window.localStorage.getItem("login")||window.localStorage.getItem("signUp"),null!==e&&void 0!==e&&0!==e.length&&e.includes(".jpg")||e.includes(".png"))this.classList.add("js-success"),this.innerHTML="Geuploaded",n.forEach(function(e){t.removeChild(e)}),t.innerHTML+="\n                <p>\n                    Je hebt voor dit verhaal op ${datum} al een\n                    foto geuploaded, deze foto is te zien voor\n                    alle mensen die zich in de buurt bevinden van\n                    locatie, waar de foto vandaan is genomen.\n                    Als u vindt dat u, op dezelfde OF een andere\n                    locatie een betere foto hebt gemaakt, schroom\n                    dan niet om die ook te uploaden.\n                </p>\n            ";else{var i=this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector(".uploads-modal");this.classList.add("js-error"),i.classList.add("js-active"),setTimeout(function(){this.classList.remove("js-error"),i.classList.remove("js-active")},5e3),i.querySelector(".remove-uploads-modal").addEventListener("click",function(){i.classList.remove("js-active")})}}},Downloading={isUserLoggedIn:Boolean,downloading:!1,getElements:function(){var e=this,t=e.id.slice(e.id.lastIndexOf("-")+1),n=document.getElementById("download-modal-"+t);return{downloadButton:e,storyNumber:t,modal:n,closeModalButton:n.firstElementChild.firstElementChild.nextElementSibling}},handlePopup:function(){function e(e,t){}function t(e){window.localStorage.setItem("downloadList",e)}function n(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=DOMTraverse.topSpanDownloads;l=!1,i(),e?(o.classList.add("js-success"),o.innerText="Al toegevoegd aan downloadlijst"):(o.classList.add("js-loading"),setTimeout(function(){t.classList.add("js-active"),o.classList.remove("js-loading"),o.classList.add("js-success"),o.innertText="Toegevoegd aan downloadlijst"},4e3),setTimeout(function(){t.classList.remove("js-active")},8e3))}function i(){!0===l?(o.classList.add("js-loading"),setTimeout(function(){o.classList.remove("js-loading")},4e3)):o.classList.remove("js-loading")}var a=Downloading.getElements.call(this),o=a.downloadButton,r=(a.storyNumber,a.modal),s=a.closeModalButton,l=!0;if(i(),Downloading.isUserLoggedIn){r.classList.remove("js-active");var d=void 0,c=void 0,u=this.parentElement.parentElement.id;if(null!==window.localStorage.getItem("downloadList"))if(0!==window.localStorage.getItem("downloadList").length){var g=!1;(d=window.localStorage.getItem("downloadList").split(",")).forEach(function(e){u===e&&(g=!0)}),!1===g?(c=d.toString(),t(c+=","+u),n()):n(!0)}else e(0,u),t(c),n();else e(0,u),t(c),n()}else r.classList.add("js-active"),s.addEventListener("click",function(){r.classList.remove("js-active")}),setTimeout(function(){r.classList.remove("js-active")},1e4)},handleButtonClick:function(){var e=DOMTraverse.downloadStoryButton,t=DOMTraverse.downloadModal;[e,DOMTraverse.downloadAllButton].forEach(function(e){e.addEventListener("click",function(){t.classList.add("js-active")})})},handleModalClick:function(){function e(){var e=this;this.getAttribute("name").includes("sms")||this.getAttribute("name").includes("mail")?(Downloading.downloading=!0,this.classList.add("js-loading"),this.innerText="Versturen...",setTimeout(function(){e.classList.remove("js-loading"),e.innerText="Verstuur opnieuw",e.classList.add("js-success")},4e3)):Downloading.downloading=!0}var t=DOMTraverse.downloadModal,n=t.querySelectorAll("form"),i=t.querySelectorAll(".btn-main");t.querySelector("#close-modal-button").addEventListener("click",function(){t.classList.remove("js-active")}),n.forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault()}),e.addEventListener("keyup",function(e){"email"===e.target.getAttribute("type")&&SignUpPage.Constraint.matchConstraintToInputField("email",e.target)})}),i.forEach(function(t){t.addEventListener("click",function(){e.call(this)})})},SmallScreenDownload:function(){var e=DOMTraverse.downloadInformationModal,t=DOMTraverse.downloadLoader,n=e.querySelector("p");e.classList.add("js-active"),n.addEventListener("click",function(){t.classList.add("js-active"),setTimeout(function(){t.classList.remove("js-active"),t.firstElementChild.setAttribute("src","dist/img/icons/verify_sign.svg")},4e3)}),setTimeout(function(){e.classList.remove("js-active")},4e3)}},Navigation={getLoginOrSignup:function(e){null!=window.localStorage.getItem("login")||null!=window.localStorage.getItem("signUp")?"index"==e?(this.changeLoginNode("Uitloggen",!0,!0,!1),Downloading.isUserLoggedIn=!0):"searchResults"==e?(this.changeLoginNode("Uitloggen",!0,!1,!1),Downloading.isUserLoggedIn=!0):"stories"==e&&(this.changeLoginNode("Uitloggen",!0,!1,!0),Downloading.isUserLoggedIn=!0):(this.changeLoginNode("Inloggen"),Downloading.isUserLoggedIn=!1)},getNodes:function(){var e=DOMTraverse.mainMenu.querySelector("#login-node");return{loginNode:e,menuList:e.parentElement,loginNodeAnchor:e.firstElementChild,firstLoginSibling:e.nextElementSibling}},changeLoginNode:function(e,t,n,i){var a=this.getNodes();a.loginNodeAnchor.innerText=e,t&&!1===n&&!1===i?a.firstLoginSibling.insertAdjacentHTML("beforebegin",'\n                <li class="dynamic-js">\n                    <a href="download-list.html" role="menuitem">Downloadlijst</a>\n                </li>\n                <li class= "dynamic-js">\n                    <a href="../index.html#reading-list" role="menuitem">Leeslijst</a>\n                </li>\n            '):t&&n&&!1===i?a.firstLoginSibling.insertAdjacentHTML("beforebegin",'\n                <li class="dynamic-js">\n                    <a href="html/download-list.html" role="menuitem">Downloadlijst</a>\n                </li>\n                <li class= "dynamic-js">\n                    <a href="#reading-list" role="menuitem">Leeslijst</a>\n                </li>\n            '):t&&i?a.loginNode.insertAdjacentHTML("afterend",'\n                <li class="dynamic-js">\n                    <a href="../download-list.html" role="menuitem">Downloadlijst</a>\n                </li>\n                <li class= "dynamic-js">\n                    <a href="../../index.html#reading-list" role="menuitem">Leeslijst</a>\n                </li>\n            '):this.removeAddedMenuItems()},removeAddedMenuItems:function(){var e=this.getNodes(),t=[].concat(_toConsumableArray(e.menuList.querySelectorAll(".dynamic-js")));t.forEach(function(e,n){t.splice(n,1)})}},IndexPage={setFormListeners:function(){DOMTraverse.searchform.addEventListener("submit",function(e){e.preventDefault();var t=DOMTraverse.searchInput.value;this.reset(),void 0!==window.localStorage.getItem("filters")&&window.localStorage.removeItem("filters"),Utility.route("input",t)}),DOMTraverse.allStoriesButton.addEventListener("click",function(){void 0!==window.localStorage.getItem("filters")&&window.localStorage.removeItem("filters"),Utility.route("input","allStories")}),DOMTraverse.filterForm.addEventListener("submit",function(e){e.preventDefault(),IndexPage.Filtering.handleFilterForm(),this.reset()})},removeFromList:function(){[].concat(_toConsumableArray(window.localStorage.readingList.split(",")))},getReadingList:function(e){if(null!=window.localStorage.getItem("login")||null!=window.localStorage.getItem("signUp")){var t=localStorage.getItem("readingList");if(null===t||0==t.length)LoadStories.hideSortButton(),this.readingListNotFound();else{var n=DOMTraverse.articleWrapper.classList;n.contains("no-results")&&n.remove("no-results"),LoadStories.createRequest(e)}}else{var i=document.createElement("span");i.innerHTML="Om je leeslijst te zien, moet je ingelogd zijn. <a href='/html/signup.html'>U kunt zich hier inloggen</a>.",LoadStories.hideSortButton(),DOMTraverse.articleWrapper.parentElement.classList.add("reading-list-js-no-login"),DOMTraverse.articleWrapper.appendChild(i)}},readingListNotFound:function(){var e=DOMTraverse.articleWrapper,t=document.createElement("i"),n=document.createElement("span");t.setAttribute("aria-label","Leeslijst icon"),n.innerHTML="Er zijn geen verhalen gevonden in uw leeslijst.<br><a href='#search-form'>Ga op zoek naar nieuwe ervaringen!</a>",e.classList.add("no-results"),e.appendChild(t),e.appendChild(n)},Filtering:{getElements:function(){return{filterFormFieldsets:DOMTraverse.filterForm.querySelectorAll("fieldset"),filterFormInputs:DOMTraverse.filterForm.querySelectorAll("input")}},getActiveInputs:function(){var e=this.getElements(),t=(e.filterFormFieldsets,[]);return e.filterFormInputs.forEach(function(e){e.checked&&t.push(e)}),t},handleFilterForm:function(){var e=this.getActiveInputs();if(0===e.length||void 0===e);else{void 0!=window.localStorage.getItem("input")&&window.localStorage.removeItem("input");var t={readTime:[],ageSuggested:[],storyLength:[]};e.forEach(function(e){e.id.includes("readTime")?t.readTime.push(e.id.substr(16)):e.id.includes("ageSuggested")?t.ageSuggested.push(e.id.substr(20)):e.id.includes("storyLength")&&t.storyLength.push(e.id.substr(19))}),Utility.route("filters",JSON.stringify(t))}}}},SignUpPage={Constraint:{getDate:function(){function e(e){return e<10?e="0"+e:e}var t=new Date,n=t.getDate(),i=t.getMonth()+1,a=t.getFullYear();return t=e(n)+"/"+e(i)+"/"+a},setCurrentDate:function(){var e=this.getDate();DOMTraverse.signUpBirthday.setAttribute("max",e)},getConstraints:function(){return{email:["[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$","Een email bestaat uit letters en nummers, een @ en minstens één punt"],name:["^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$","Een volledige naam bestaat uit enkel woorden en spaties."],password:["^([a-zA-Z0-9@*#]{8,15})$","Een goed wachtwoord bestaat uit minimaal 8 tekens, waarvan minstens één hoofd- en kleine letter en een nummer."]}},matchConstraintToInputField:function(e,t){var n=this.getConstraints(),i=!0,a=!1,o=void 0;try{for(var r,s=Object.keys(n)[Symbol.iterator]();!(i=(r=s.next()).done);i=!0){var l=r.value;e.includes(l)&&this.createConstraint(n,l,t)}}catch(e){a=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}},createConstraint:function(e,t,n){var i=new RegExp(e[t][0]);0===n.value.length?n.classList.remove("js-active"):n.classList.add("js-active"),i.test(n.value)?n.setCustomValidity(""):n.setCustomValidity(e[t][1])},checkElements:function(){var e=this;DOMTraverse.tovalidate.forEach(function(t){t.addEventListener("keyup",function(){t.classList.contains("password")?e.matchConstraintToInputField("password",t):t.classList.contains("email")?e.matchConstraintToInputField("email",t):t.classList.contains("name")&&e.matchConstraintToInputField("name",t)})})}},UserActions:{userLogin:function(){function e(e){localStorage.setItem("login",JSON.stringify(e)),Utility.currentPath.includes("dfds_seaways")?window.location.href="../index.html":window.location.href="/index.html"}DOMTraverse.loginForm.addEventListener("submit",function(t){t.preventDefault(),e({email:this.querySelector("#login-email").value,password:this.querySelector("#login-password").value})})},userPasswordReset:function(){function e(e){localStorage.setItem("reset",e)}DOMTraverse.resetForm.addEventListener("submit",function(t){t.preventDefault(),e(this.querySelector("#reset-password").value)})},userSignUp:function(){function e(e){localStorage.setItem("signUp",JSON.stringify(e)),window.location.href="/index.html"}DOMTraverse.signUpForm.addEventListener("submit",function(t){t.preventDefault(),e({birthday:this.querySelector("#sign-up-birthday").value,email:this.querySelector("#sign-up-email").value,name:this.querySelector("#sign-up-name").value,nationality:this.querySelector("#sign-up-nationality").value,password:this.querySelector("#sign-up-password").value})})},init:function(){this.userLogin(),this.userPasswordReset(),this.userSignUp()}}},ResultPage={readingListArray:[],addActiveClass:function(){var e=this;null===window.localStorage.getItem("login")&&null===window.localStorage.getItem("signUp")||(this.classList.toggle("js-loading"),setTimeout(function(){ResultPage.addToReadingList.call(e),ResultPage.showTopMessage.call(e)},1500))},addToReadingList:function(){var e=this.id.slice(this.id.lastIndexOf("-")+1);window.localStorage.getItem("readingList");ResultPage.readingListArray.push(e),window.localStorage.setItem("readingList",ResultPage.readingListArray)},showTopMessage:function(){var e=this;DOMTraverse.topSpanReadingList.classList.add("js-active"),setTimeout(function(){e.classList.remove("js-loading"),e.classList.add("js-active"),e.innerText="Toegevoegd aan leeslijst",DOMTraverse.topSpanReadingList.classList.remove("js-active")},4e3),setTimeout(function(){e.classList.remove("js-active"),e.classList.add("js-remove"),e.innerText="Verwijderen uit leeslijst"},8e3)}},StoryPage={Kater:{getElements:function(){var e=document.getElementsByClassName("story-1")[0],t=e.firstElementChild,n=t.querySelectorAll("section"),i=t.querySelector(".title");return{allSections:n,article:t,kater:e,paragraph:t.querySelector("p"),titleSection:i}},getTranslateValue:function(e){var t=e.indexOf("("),n=e.indexOf("%");return parseInt(e.slice(t+1,n-1))},handleScroll:function(){function e(e){i.scrollTop>=i.scrollHeight/e?!0===r?(o.style.transform="translateY(700%)",StoryPage.Kater.getTranslateValue(a.style.transform)<=5&&(a.style.transform="translateX(0%)")):(a.style.transform="translateX("+(i.scrollHeight/(e-1)-i.scrollTop)+"%)",setTimeout(function(){r=!0},500)):n.forEach(function(t,n){t.style.transform="skew("+(Math.floor(10*Math.random())+5)+"deg, "+(Math.floor(10*Math.random())+5)+"deg) rotate("+(Math.floor(10*Math.random())+5)+"deg) scale("+(Math.random()+.5)+") translateY(-"+i.scrollTop*e+"px) translateX("+i.scrollTop*e+"px)"})}var t=this.getElements(),n=t.allSections,i=t.kater,a=t.paragraph,o=t.titleSection,r=void 0;Utility.getCurrentScreenHeight>=1e3?i.addEventListener("scroll",function(){e(7)}):i.addEventListener("scroll",function(){e(4)})}},Paranoia:{getElements:function(){var e=document.querySelector(".story-2>article");return{article:e,followLeft:e.querySelectorAll(".follow-left"),followRight:e.querySelectorAll(".follow-right"),paragraph:e.querySelector("p")}},getScrollTop:function(){var e=this.getElements(),t=(e.article,e.followLeft),n=e.followRight,i=e.paragraph,a=void 0;window.addEventListener("load",function(){n.forEach(function(e){e.classList.add("js-hide")})}),i.addEventListener("scroll",function(){(a=i.scrollTop)<300||a>1800&&a<2499||a>3200?(t.forEach(function(e){e.classList.remove("js-hide")}),n.forEach(function(e){e.classList.add("js-hide")})):(a>300&&a<1799||a>2500&&a<3199)&&(t.forEach(function(e){e.classList.add("js-hide")}),n.forEach(function(e){e.classList.remove("js-hide")}))})}},VrijdagDeDertiende:{getElements:function(){return{verticalDrop:document.querySelector(".vertical-drop"),dividerRight:document.querySelector(".divider__right")}},handleScroll:function(){var e=this.getElements(),t=e.verticalDrop,n=e.dividerRight,i=n.scrollTop;n.addEventListener("scroll",function(){var e=n.scrollTop,a=Math.floor(1.2*Math.random())+.5;a*=Math.floor(2*Math.random()==1?1:-1);var o=t.style.transform,r=o.substr(0,o.indexOf(" ")),s=r.slice(r.indexOf("(")+1,r.indexOf("%"));t.style.transform=e>i?"translateY("+n.scrollTop+"%) rotateZ(90deg) scale("+(.7*Math.random()+.5)+") translateX("+a+"%)":"translateY("+(s-n.scrollTop/50)+"%) rotateZ(90deg) scale("+(.7*Math.random()+.5)+") translateX("+a+"%)",i=e},!1)}}},onLoad=function(){var e=Utility.getCurrentPath();if(DOMTraverse.topSpans.forEach(function(e){window.addEventListener("scroll",function(){0===window.pageYOffset?e.style.top="4em":e.style.top="0"})}),"index"==e)Utility.getCurrentScreenWidth<Utility.MajorBreakPointTwo&&Downloading.downloading&&Downloading.SmallScreenDownload(),IndexPage.getReadingList("readingList"),IndexPage.setFormListeners(),Navigation.getLoginOrSignup("index");else if("searchResults"==e){if(void 0!==window.localStorage.getItem("input")?LoadStories.createRequest("input"):void 0!==window.localStorage.getItem("filters")&&LoadStories.createRequest("filters"),!0===LoadStories.loadingFininished)SortStories.determineActiveSorter();else var t=setInterval(function(){!0===LoadStories.loadingFininished&&(SortStories.determineActiveSorter(),clearInterval(t))},500);Navigation.getLoginOrSignup("searchResults")}else"downloads"==e?(Downloading.handleButtonClick(),Downloading.handleModalClick()):"signUp"==e?(SignUpPage.Constraint.checkElements(),SignUpPage.Constraint.setCurrentDate(),SignUpPage.UserActions.init()):"kater"==e?(StoryPage.Kater.handleScroll(),Navigation.getLoginOrSignup("stories")):"paranoia"==e?(StoryPage.Paranoia.getScrollTop(),Navigation.getLoginOrSignup("stories")):"vrijdag"==e&&(StoryPage.VrijdagDeDertiende.handleScroll(),Navigation.getLoginOrSignup("stories"))}();