"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function createRequest(){function e(e){alert("Oeps, er ging iets fout, met de foutmelding: "+e+". Probeer de pagina opnieuw te laden om de fout op te lossen!")}var t=new XMLHttpRequest;t.open("GET","https://api.myjson.com/bins/uneyp",!0);var n=void 0;t.onprogress=function(){void 0==n&&(!function(){for(var e=document.createElement("ul"),t=0;t<12;t++){var n=document.createElement("li");e.appendChild(n)}e.id="story-loader",document.getElementsByClassName("article-wrapper")[0].appendChild(e)}(),n=!0)},t.onload=function(){200==this.status&&(document.getElementsByClassName("article-wrapper")[0].removeChild(document.getElementById("story-loader")),createArticles(JSON.parse(this.responseText)))},t.onerror=function(t){e(t)},t.send()}function createArticles(e){function t(){var t=[];return e.stories.forEach(function(e){"allStories"===a?t.push(e.title):e.title.toLowerCase().includes(a.toLowerCase())&&t.push(e.title)}),t}function n(t){t.forEach(function(t,n){e.stories.map(function(e){return matchStorageToRequest(t,e,n,i)})})}var a=localStorage.getItem("input"),i=document.getElementsByClassName("article-wrapper")[0];!function(){var e=t();if(0==e.length||void 0==e){hideSortButton();var a=document.createElement("span");a.innerHTML='Helaas, er zijn geen matches gevonden met de opgegeven (deel)titel.<br>Probeer een andere titel, <a href="#">laat alle verhalen zien</a> of gebruik de filters om te zoeken.',i.appendChild(a)}else if(e.length>25){var r=e.slice(0,25);e.slice(25);n(r);var s=document.createElement("button");s.setAttribute("type","button"),s.setAttribute("aria-label","Toon nog 25 verhalen"),s.classList.add("btn","btn-main"),s.innerText="Toon meer verhalen",i.appendChild(s)}else n(e);[].concat(_toConsumableArray(document.getElementsByClassName("section-title"))).forEach(function(t){"Resultaten"!=t.innerHTML&&"Leeslijst"!=t.innerHTML||(t.innerHTML+=" - "+e.length)})}()}function hideSortButton(){document.getElementById("toggle-button-group-sort").style.display="none"}function matchStorageToRequest(e,t,n,a){if(e==t.title){var i=t.title.toLowerCase(),r=t.nr,s=t.by,l=t.text.substr(0,220),o=l=t.text.substr(0,Math.min(l.length,l.lastIndexOf(" "))),c=t.text.substring(Math.max(l.length,l.lastIndexOf(" ")));a.innerHTML+=CreateArticleStructure("http://lorempixel.com/400/200/",s,i,r,o,c,n)}}function CreateArticleStructure(e,t,n,a,i,r,s){return'\n        <article>\n            <header class="article-header">\n                <img src='+e+' alt="search-result-image" onclick="toggleJavascript.call(this)" data-target="rest-text-'+s+'">\n                <span>Door: '+t+"</span>\n                <div><h3>"+n+" ("+a+')</h3></div>\n                <button type="button" aria-label="Open optie venster" onclick="toggleJavascript.call(this)" data-target="modal-story-'+s+'"></button>\n                <ul type="menubar" class="modal" id="modal-story-'+s+'">\n                    <li type="menuitem">Downloaden naar device</li>\n                    <li type="menuitem">Niet geïnteresseerd</li>\n                    <li type="menuitem">Toevoegen aan leeslijst</li>\n                    <li type="menuitem">Verhaal lezen</li>\n                </ul>\n            </header>\n            <p onclick="toggleJavascript.call(this)" aria-label="Open volledig verhaal" data-target="rest-text-'+s+'">\n                '+i+'\n                <span id="rest-text-'+s+'">'+r+"</span>\n            </p>\n         </article>\n        "}function toggleJavascript(){document.getElementById(""+this.dataset.target).classList.toggle("js-active"),this.dataset.target.includes("modal-story")&&this.setAttribute("aria-label","Sluit optie venster"),this.dataset.target.includes("rest-text")&&!this.classList.contains("js-active")?(this.setAttribute("aria-label","Sluit volledig verhaal"),this.classList.add("js-active")):this.dataset.target.includes("rest-text")&&this.classList.contains("js-active")&&(this.setAttribute("aria-label","Open volledig verhaal"),this.classList.remove("js-active"))}function determineElClicked(){"main-menu"===this.dataset.target&&"☰"==this.textContent?(this.textContent="✕",this.setAttribute("aria-label","Sluit hoofdmenu")):"main-menu"===this.dataset.target&&"✕"==this.textContent?(this.textContent="☰",this.setAttribute("aria-label","Open hoofdmenu")):this.classList.toggle("js-active")}var onLoad=function(){function e(){document.getElementById("search-form").addEventListener("submit",function(e){e.preventDefault();var n=document.getElementById("search-for-title").value;this.reset(),t(n)}),document.getElementById("show-all-stories").addEventListener("click",function(){return t("allStories")})}function t(e){localStorage.setItem("input",e),window.location.href="/html/search-results.html"}function n(){var e=localStorage.getItem("readingList");if(null===e||0==e.length)hideSortButton(),a();else{var t=document.getElementsByClassName("article-wrapper")[0].classList;t.contains("no-results")&&t.remove("no-results")}}function a(){var e=document.getElementsByClassName("article-wrapper")[0],t=document.createElement("i"),n=document.createElement("span");t.setAttribute("aria-label","Leeslijst icon"),n.innerHTML="Er zijn geen verhalen gevonden in uw leeslijst.<br><a href='#search-form'>Ga op zoek naar nieuwe ervaringen!</a>",e.classList.add("no-results"),e.appendChild(t),e.appendChild(n)}!function(){var t=window.location.pathname;"/index.html"!=t&&"/"!=t&&"/#"!=t||(e(),n()),"/html/search-results.html"==t&&createRequest()}()}();[].concat(_toConsumableArray(document.querySelectorAll("[data-target]"))).map(function(e){e.addEventListener("click",function(){toggleJavascript.call(this),determineElClicked.call(this)})});